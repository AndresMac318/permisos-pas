<div class="row justify-content-center">
    <div class="col-8 mt-4">
        <h2>Crear empleado</h2>
        <hr>

        <form action="" [formGroup]="formAddEmpleado" (ngSubmit)="guardarEmpleado()" >
                        
            <div class="row row-cols-4 mb-3">
            
                <div class="col form-floating">
                    <input type="number" class="form-control" id="floatingInput" autocomplete="off" formControlName="idHuella" >
                    <label for="floatingInput">ID Huella</label>
                </div>       
                <div class="col">
                    <input style="height: 100%;" (click)="consultaH()" type="button" class='btn btn-primary btnCargaId' value="Asignar Huella">
                </div>                           
                
            </div>
                    
            <div class="row row-cols-2">
                <div class="form-floating mb-4">
                    <input type="text" class="form-control" id="floatingInput" autocomplete="off" formControlName="apellido1" >
                    <label for="floatingInput">Primer apellido</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="text" class="form-control" id="floatingInput" autocomplete="off" formControlName="apellido2" >
                    <label for="floatingInput">Segundo apellido</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="text" class="form-control" id="floatingInput" autocomplete="off" formControlName="nombre1" >
                    <label for="floatingInput">Primer nombre</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="text" class="form-control" id="floatingInput" autocomplete="off" formControlName="nombre2" >
                    <label for="floatingInput">Segundo nombre</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="number" class="form-control" id="floatingInput" autocomplete="off" formControlName="cedula" >
                    <label for="floatingInput">No. de identificaci√≥n</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="email" class="form-control" id="floatingInput" autocomplete="off" formControlName="email" >
                    <label for="floatingInput">Email</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="number" class="form-control" id="floatingInput" autocomplete="off" formControlName="telefono" >
                    <label for="floatingInput">Telefono</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="text" class="form-control" id="floatingInput" autocomplete="off" formControlName="direccion" >
                    <label for="floatingInput">Direccion</label>
                </div>
                <div class="form-floating mb-4">
                    <select class="form-select" id="floatingSelect" autocomplete="off" formControlName="sexo" >
                        <option *ngFor="let genero of generos" [value]="genero">{{genero}}</option>
                    </select>
                    <label for="floatingSelect">Seleccione su genero</label>
                </div>
                <div class="form-floating mb-4">
                    <input type="date" class="form-control" id="floatingInput" autocomplete="off" formControlName="fnacimiento" >
                    <label for="floatingInput">Fecha de nacimiento:</label>
                </div>
            </div>

            <div class="row justify-content-center mb-4">
                <div class="col col-8">
                    <h6 class="text-center">Escriba su firma</h6>
                <canvas
                    class="canvasEmpleado"
                    ejs-signature 
                    #signatureEmpleado id="signature" 
                    [maxStrokeWidth]="1" 
                    [minStrokeWidth]="0.4" 
                    [velocity]="0.9"                             
                    (change)="signaturePadChangeState()"
                    >
                </canvas>
                <!--? formControlName="firma" -->
                <div class="">
                    <span style="float: left" >
                        <button type="button" ejs-button #clearbuttoncomponent [disabled]="true" (click)="clearSignature()" >
                            Borrar
                        </button>
                    </span>
                    <span style="float: left;" >
                        <button style="display: none;" type="button" ejs-button #savebuttoncomponent [disabled]="true" cssClass="e-info" class="ms-2"  >
                            
                        </button>
                    </span>
                </div>
                </div>
                
            </div>

            <div class="row justify-content-center mb-4">
                <div class="col-4">
                    <button (click)="saveSignature()" type="submit" class="btn btn-success">Guardar empleado</button>
                </div>
            </div>
            
            
        </form>
    </div>
</div>

<script>
    $(document).ready(function () {
    $(document).on("click", ".btnCargaId", function () {
        var opcion = 2;
        $.ajax({
            url: "https://passphp.herokuapp.com/php/queryRead.php",
            type: "POST",
            dataType: "json",
            data: { opcion: opcion },
            success: function (data) {
                var id = data[0].id_huella;
                $('#inputIdHuella').val(id + 420);
            }
        });
    });
});

</script>
